#!/bin/bash

# Source this file to:
# - Load the Intel 19 compiler and libraries
# - Load a script for common setup to all compilers

export COMPILER_SUITE=intel

if [ "$TRUE_HOST" = "banting" -o "$TRUE_HOST" = "daley" ]; then
   export COMPILER_VERSION=19.0.5.281
   module unload intel/19.0.3.199
   module load ${COMPILER_SUITE}/${COMPILER_VERSION}
   module add craype-hugepages16M
   module add cray-fftw/3.3.8.2
   . ssmuse-sh -x main/opt/numa/numa-2.0.14
else
   export COMPILER_VERSION=19.0.3.199
   . ssmuse-sh -x comm/eccc/all/opt/intelcomp/intelpsxe-cluster-${COMPILER_VERSION}
   . ssmuse-sh -x main/opt/openmpi/openmpi-3.1.2--hpcx-2.4.0-mofed-4.6--intel-${COMPILER_VERSION}
   . ssmuse-sh -x main/opt/openmpi-setup/openmpi-setup-0.2
   . ssmuse-sh -x main/opt/numa/numa-2.0.14
fi

. ssmuse-sh -x main/opt/cmake/cmake-3.21.1

. ./.common_setup ${COMPILER_SUITE}

